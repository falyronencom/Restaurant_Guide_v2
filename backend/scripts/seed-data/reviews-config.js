/**
 * Review Configuration Templates for Seed Data
 *
 * Defines seed user profiles, review text templates (Russian),
 * and partner response templates for generating realistic review data.
 *
 * Distribution Strategy:
 * - Target: 150-250 reviews across 75 establishments
 * - Rating: weighted toward 3-5 (realistic positive skew)
 * - Content: Russian, category-appropriate, varied length
 * - Partner responses: ~25% of reviews
 */

// ─── Seed User Profiles (12 accounts) ──────────────────────────────────────

export const SEED_USERS = [
  { name: 'Анна Петрова', email: 'seed.user.1@restaurantguide.by' },
  { name: 'Дмитрий Козлов', email: 'seed.user.2@restaurantguide.by' },
  { name: 'Елена Новикова', email: 'seed.user.3@restaurantguide.by' },
  { name: 'Сергей Морозов', email: 'seed.user.4@restaurantguide.by' },
  { name: 'Ольга Васильева', email: 'seed.user.5@restaurantguide.by' },
  { name: 'Александр Лукашевич', email: 'seed.user.6@restaurantguide.by' },
  { name: 'Наталья Соколова', email: 'seed.user.7@restaurantguide.by' },
  { name: 'Иван Жуковский', email: 'seed.user.8@restaurantguide.by' },
  { name: 'Мария Карпович', email: 'seed.user.9@restaurantguide.by' },
  { name: 'Павел Шевченко', email: 'seed.user.10@restaurantguide.by' },
  { name: 'Татьяна Борисенко', email: 'seed.user.11@restaurantguide.by' },
  { name: 'Андрей Климович', email: 'seed.user.12@restaurantguide.by' },
];

export const SEED_USER_PASSWORD = process.env.SEED_PASSWORD || 'SeedUser2026!';

export const SEED_USER_EMAIL_PATTERN = 'seed.user.%@restaurantguide.by';

// ─── Category → Review Group Mapping ───────────────────────────────────────

export const CATEGORY_GROUP_MAP = {
  restaurant: 'dining',
  cafe: 'dining',
  bar: 'drinks',
  pub: 'drinks',
  fast_food: 'quick',
  pizzeria: 'quick',
  canteen: 'quick',
  bakery: 'bakery',
  hookah_lounge: 'entertainment',
  bowling: 'entertainment',
  karaoke: 'entertainment',
  billiards: 'entertainment',
  nightclub: 'entertainment',
};

// ─── Rating Distribution Weights ───────────────────────────────────────────

export const RATING_WEIGHTS = [
  { rating: 5, weight: 25 },
  { rating: 4, weight: 35 },
  { rating: 3, weight: 20 },
  { rating: 2, weight: 12 },
  { rating: 1, weight: 8 },
];

// ─── Review Templates (Russian, category-appropriate) ──────────────────────

export const REVIEW_TEMPLATES = {
  dining: {
    positive: [
      'Отличный ресторан! Кухня на высшем уровне, блюда подаются красиво и вкусно. Обслуживание безупречное. Обязательно вернёмся!',
      'Прекрасное место для семейного ужина. Порции большие, всё свежее и ароматное. Детям очень понравилось. Цены адекватные для такого качества.',
      'Великолепная атмосфера и вкусная еда. Интерьер стильный, музыка ненавязчивая. Стейк приготовлен идеально — средней прожарки, как и просили.',
      'Были на деловом обеде — всё прошло отлично. Еда вкусная, подача быстрая, персонал внимательный. Бизнес-ланч по отличной цене.',
      'Замечательное заведение! Каждый раз радует стабильным качеством. Шеф-повар знает своё дело. Особенно хвалю пасту и домашние десерты.',
      'Одно из лучших мест в городе! Уютный интерьер, приятная музыка. Салат «Цезарь» — лучший из тех, что пробовала. Вино подобрали идеально.',
      'Ходим сюда уже третий год — качество не падает. Меню обновляется каждый сезон, всегда есть что-то новое.',
      'Очень понравился воскресный бранч! Шведский стол с огромным выбором блюд. Всё свежее, горячее. Кофе ароматный и крепкий.',
      'Наконец нашли место с настоящей домашней едой. Драники как у бабушки, борщ наваристый. Порции щедрые, уходишь сытым и довольным.',
      'Прекрасная грузинская кухня! Хачапури по-аджарски божественные, хинкали сочные. Вино настоящее грузинское. Персонал гостеприимный.',
      'Шикарный ужин! Заказывали сет из пяти блюд — каждое было произведением искусства. Повар вышел к столу и рассказал про каждое блюдо.',
      'Место с душой. Готовят с любовью, и это чувствуется в каждом блюде. Тёплая атмосфера, живые цветы на столах.',
      'Лучшие завтраки! Блинчики с творогом, каша на топлёном молоке. Всё как в детстве. И цены радуют — полноценный завтрак за 12 рублей.',
      'Празднование юбилея прошло идеально. Организовали всё — от меню до музыки. Гости были в восторге, особенно от торта на заказ.',
      'Рекомендую всем! Свежие морепродукты, отличное обслуживание. Мидии в сливочном соусе — это что-то невероятное. Десерт «Наполеон» тоже шикарный.',
    ],
    neutral: [
      'Неплохое место, но без восторга. Еда нормальная, порции средние. Цены чуть завышены для такого уровня. Сходить можно, но постоянным не станет.',
      'Среднее впечатление. Салаты свежие, горячее нормальное, но ничего выдающегося. Обслуживание медленноватое — ждали заказ минут 30.',
      'Обычное кафе без претензий. Завтраки нормальные, кофе средний. Для быстрого перекуса рядом с работой — вполне сойдёт.',
      'Зашли случайно — в целом нормально. Суп дня был вкусный, а вот основное блюдо пресноватое. Десерт скрасил впечатление.',
      'Сходить один раз можно. Меню небольшое, еда без изюминки. Интерьер симпатичный, но обслуживание могло быть расторопнее.',
      'Нормально, но ожидали большего. Позиционируют себя как премиум, а по факту — крепкий средний уровень. За эти деньги хочется чуть больше внимания.',
      'Еда вкусная, но порции маловаты. Атмосфера приятная, но столики стоят слишком близко — слышно соседей. В целом нормальное место.',
      'Кухня хорошая, а вот сервис подкачал. Официант путал заказы, долго несли счёт. Еда при этом была вкусной.',
    ],
    negative: [
      'Разочарование. Ожидали большего после хороших отзывов. Еда холодная, пришлось просить разогреть. Официант забыл про наш заказ.',
      'Не рекомендую. Порции маленькие, еда невкусная, обслуживание ужасное. За эти деньги можно найти гораздо лучше.',
      'Плохой опыт. В супе попался волос. Когда обратили внимание, официант даже толком не извинился. Больше не придём.',
      'Очень разочарованы. Забронировали столик, а нас посадили у кухни. Шумно, запахи. Еда при этом была посредственная.',
      'Цены космические, а качество — на уровне столовой. Стейк жёсткий как подошва, салат завявший. Официант хамил.',
    ],
  },
  drinks: {
    positive: [
      'Отличный бар! Коктейльная карта впечатляет — бармен настоящий профессионал. Авторские коктейли — каждый произведение искусства.',
      'Лучшее место для пятничного вечера. Живая музыка по выходным, крафтовое пиво на кранах. Персонал дружелюбный.',
      'Уютный паб с отличным выбором пива. Местное крафтовое — очень достойно. Крылышки острые и сочные, картошка хрустящая.',
      'Замечательная винотека! Сомелье подобрал идеальное вино. Сырная тарелка великолепная. Тихое место для приятного вечера.',
      'Классный спорт-бар! Большие экраны, атмосфера во время матчей невероятная. Пиво холодное, бургеры сочные.',
      'Шикарная терраса с видом на город. Коктейли на любой вкус. «Апероль Шприц» идеален для летнего вечера.',
      'Бар с характером! Интерьер в стиле лофт, приглушённый свет. Виски-карта на целую страницу. Бармен рассказывает про каждый сорт.',
      'Отличное место для свидания. Уютные диванчики, свечи, негромкая музыка. Коктейли красивые и вкусные. Цены приемлемые.',
    ],
    neutral: [
      'Обычный бар, ничего особенного. Пиво стандартное, закуски средние. По пятницам очень шумно. Для тихого вечера лучше другое место.',
      'Нормальный паб. Выбор пива неплохой, но цены кусаются. Бургер был суховат. Музыка иногда слишком громкая.',
      'Зашли днём выпить кофе — нормально. Вечером, наверное, веселее. Интерьер интересный, но порции закусок маловаты.',
      'Средний бар. Коктейли нормальные, но ничего выдающегося. Бармен работает медленно — ждали напитки минут 15.',
    ],
    negative: [
      'Ужасный сервис. Бармен хамит, коктейли разбавленные. Музыка орёт — невозможно разговаривать. Ценник при этом запредельный.',
      'Пришли компанией — испортили вечер. Пиво несвежее, половины меню нет в наличии. Официант появлялся раз в полчаса.',
      'Грязно и накурено. Коктейли невкусные, лёд закончился в 9 вечера. За соседним столом драка — охрана не реагирует.',
    ],
  },
  quick: {
    positive: [
      'Отличный фаст-фуд! Быстро, вкусно и недорого. Бургер сочный, картошка свежая и горячая. Самообслуживание удобное.',
      'Лучшая пицца в районе! Тесто тонкое, начинка щедрая, сыр тянется. Доставляют за 30 минут — всегда горячая.',
      'Отличная столовая! Домашняя еда по приятным ценам. Супы наваристые, котлеты сочные. Идеально для обеда.',
      'Быстро и вкусно! Шаурма здесь лучшая — большая, с хрустящей курочкой и свежими овощами. Соус фирменный.',
      'Пиццерия с душой! Готовят в дровяной печи, тесто пышное. Порции огромные, одной пиццы хватает на двоих.',
      'Столовая с отличным выбором. Каждый день новое меню. Порции большие, цены низкие. Обед на двоих — меньше 20 рублей.',
      'Быстрое обслуживание, вкусные бургеры. Котлета из свежей говядины, не полуфабрикат. Соусы домашние. Лучший фаст-фуд в городе!',
      'Пицца «Четыре сыра» — огонь! Тесто идеальное, сыр качественный. Ещё понравился «Цезарь» — свежий и большой.',
    ],
    neutral: [
      'Обычный фаст-фуд. Бургеры стандартные, ничего особенного. Быстро приготовили — это плюс. Для перекуса на бегу пойдёт.',
      'Пицца нормальная, но бывает лучше. Тесто иногда пересушенное. Доставка не всегда вовремя. Приемлемо для своей цены.',
      'Столовая как столовая. Еда простая, сытная. Для ежедневного обеда — вариант. Очереди в час пик — главный минус.',
      'Бургер был нормальный, но картошка холодная. Кола разбавленная. Для перекуса сойдёт, но за изысками не сюда.',
    ],
    negative: [
      'Невкусно и дорого для фаст-фуда. Бургер сухой, салат завявший. Кола тёплая. За эти деньги лучше в кафе.',
      'Пицца приехала холодной с опозданием на 40 минут. Тесто как картон, начинки еле видно. Позвонили — даже не извинились.',
      'Столовая ужасная. Суп из пакета, котлеты из сои. Цены при этом как в нормальном кафе. Не рекомендую.',
    ],
  },
  bakery: {
    positive: [
      'Волшебная пекарня! Круассаны хрустящие и нежные, кофе ароматный. Выпечка всегда свежая. Место для утреннего счастья!',
      'Лучшие булочки с корицей! Тесто воздушное, начинка ароматная. Берём каждое утро по дороге на работу. Капучино тоже отличный.',
      'Обожаю эту пекарню! Хлеб на закваске — настоящий. Пирожные красивые и вкусные. Торты на заказ потрясающие.',
      'Каждый день свежая выпечка. Эклеры — мечта! Чизкейк отменный. Кофе хороший. Приятный уголок для утреннего перекуса.',
      'Багеты как во Франции, круассаны с шоколадом тают во рту. Цены приемлемые, персонал приветливый. Наша любимая пекарня!',
      'Тут пекут лучший ржаной хлеб в городе. Ещё берём маффины — шоколадные и черничные. Дети обожают их слоёные трубочки.',
    ],
    neutral: [
      'Пекарня нормальная. Выпечка свежая, но без изюминки. Хлеб обычный, булочки стандартные. Кофе средний. Для района — ок.',
      'Средненько. Круассаны иногда свежие, иногда нет. Кофе бывает горчит. Цены нормальные. Захожу, когда рядом.',
      'Хлеб хороший, а вот сладкая выпечка — на любителя. Слишком много крема и сахара. Кофе нормальный.',
    ],
    negative: [
      'Выпечка несвежая — купили вчерашние круассаны по цене свежих. Обидно. Больше не пойдём.',
      'Кофе ужасный, выпечка чёрствая. Витрина красивая, а на вкус — разочарование. Персонал равнодушный.',
    ],
  },
  entertainment: {
    positive: [
      'Отличный боулинг! Дорожки в идеальном состоянии, обувь чистая. Ходим компанией каждую неделю. Бар при боулинге тоже радует.',
      'Лучшее караоке в городе! Огромная база песен, звук качественный. Отдельные кабинки — можно петь не стесняясь.',
      'Кальянная на уровне! Кальяны мастерские, табак качественный. Атмосфера расслабляющая, диваны удобные. Чай и сладости — идеальное дополнение.',
      'Шикарный бильярд! Столы профессиональные, кии в отличном состоянии. Освещение правильное. Для серьёзной игры и отдыха с друзьями.',
      'Ночной клуб огонь! DJ играет отличную музыку, танцпол просторный. Коктейли вкусные, барная стойка большая.',
      'Классная кальянная! Уютная обстановка, приглушённый свет, мягкая музыка. Мастера знают своё дело. Идеально после рабочей недели.',
      'Боулинг супер! Детям понравились бампер-дорожки, а взрослые играли на соседних. Пицца в баре вкусная. Отличный семейный вечер!',
      'Караоке-бар с отличной кухней! Пели три часа, голос не сел. Акустика в кабинке идеальная. Суши тоже заказали — свежие и вкусные.',
    ],
    neutral: [
      'Боулинг нормальный, но дороговато. По выходным очереди. Еда в баре средняя. Для разового похода — ок.',
      'Караоке обычное. База песен могла быть больше, популярных не хватает. Звук нормальный, но микрофоны фонят. Цены средние.',
      'Кальянная без изысков. Кальян нормальный, ничего особенного. Интерьер обычный. Чай вкусный. Для посиделок — пойдёт.',
      'Бильярд нормальный. Столы не новые, но играть можно. Цена за час средняя. Бар при бильярде — так себе.',
    ],
    negative: [
      'Боулинг в ужасном состоянии. Дорожки кривые, шары с трещинами. За такие деньги — позор. Лучше в другой конец города.',
      'Караоке ужасное. Звук жуткий, колонки хрипят. База маленькая. Еда невкусная. Три часа мучений за немалые деньги.',
      'Кальянная грязная. Кальян на вкус как горелая бумага. Угли еле тлели. Попросили переделать — сделали так же плохо.',
    ],
  },
};

// ─── Partner Response Templates ────────────────────────────────────────────

export const PARTNER_RESPONSES = {
  positive: [
    'Спасибо за тёплые слова! Мы очень рады, что вам понравилось. Ждём вас снова!',
    'Благодарим за отличный отзыв! Передадим благодарность нашей команде. До скорой встречи!',
    'Спасибо, что выбрали нас! Рады, что смогли порадовать. Будем стараться и дальше!',
    'Очень приятно! Наш шеф-повар будет рад. Ждём вас снова в гости!',
    'Благодарим за высокую оценку! Мы работаем для вас и ценим каждого гостя.',
    'Спасибо за визит и добрые слова! Всегда рады видеть вас у нас.',
    'Рады, что вам всё понравилось! Приходите ещё — мы рады постоянным гостям.',
    'Спасибо за рекомендацию! Стараемся держать высокую планку.',
  ],
  neutral: [
    'Спасибо за честный отзыв! Мы учтём замечания и постараемся стать лучше. Надеемся, в следующий раз впечатления будут ярче!',
    'Благодарим за обратную связь! Работаем над улучшением сервиса. Приходите снова — уверены, сможем удивить.',
    'Спасибо, что поделились. Ваши замечания важны для нас — будем работать над ними.',
    'Ценим вашу честность! Мы уже работаем над улучшениями. Будем рады видеть вас снова.',
  ],
  negative: [
    'Приносим искренние извинения за неудобства! Это недопустимо. Мы разбираемся и примем меры. Хотели бы пригласить вас снова.',
    'Нам очень жаль, что визит прошёл не лучшим образом. Обязательно разберёмся и примем меры.',
    'Спасибо за обратную связь, хоть и неприятную. Мы серьёзно относимся к таким ситуациям и уже работаем над исправлением.',
    'Примите наши извинения! Такие ситуации — исключение. Мы уже провели работу с персоналом. Надеемся увидеть вас снова.',
  ],
};

// ─── Helper Functions ──────────────────────────────────────────────────────

/**
 * Simple seeded PRNG (mulberry32) for deterministic review generation
 */
export function createSeededRandom(seed) {
  let state = seed | 0;
  return function () {
    state = (state + 0x6D2B79F5) | 0;
    let t = Math.imul(state ^ (state >>> 15), 1 | state);
    t = (t + Math.imul(t ^ (t >>> 7), 61 | t)) ^ t;
    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
  };
}

/**
 * Random integer in [min, max] inclusive
 */
export function randomInt(min, max, randomFn = Math.random) {
  return Math.floor(randomFn() * (max - min + 1)) + min;
}

/**
 * Pick an item from array using randomFn
 */
export function pickFrom(arr, randomFn = Math.random) {
  return arr[Math.floor(randomFn() * arr.length)];
}

/**
 * Get target review count for an establishment based on city and category
 */
export function getTargetReviewCount(city, categories, randomFn) {
  const isMinsk = city === 'Минск';
  const isDining = categories.some(c => ['restaurant', 'cafe'].includes(c));
  const isDrinks = categories.some(c => ['bar', 'pub'].includes(c));
  const isEntertainment = categories.some(c =>
    ['bowling', 'karaoke', 'billiards', 'nightclub', 'hookah_lounge'].includes(c),
  );

  if (isMinsk && isDining) return randomInt(5, 10, randomFn);
  if (isMinsk && isDrinks) return randomInt(3, 7, randomFn);
  if (isMinsk && isEntertainment) return randomInt(2, 6, randomFn);
  if (isMinsk) return randomInt(2, 5, randomFn);
  if (isDining) return randomInt(1, 5, randomFn);
  if (isDrinks) return randomInt(0, 4, randomFn);
  return randomInt(0, 3, randomFn);
}

/**
 * Get review category group from establishment categories
 */
export function getCategoryGroup(categories) {
  for (const cat of categories) {
    if (CATEGORY_GROUP_MAP[cat]) return CATEGORY_GROUP_MAP[cat];
  }
  return 'dining'; // fallback
}

/**
 * Pick a weighted random rating
 */
export function pickRating(randomFn = Math.random) {
  const totalWeight = RATING_WEIGHTS.reduce((sum, w) => sum + w.weight, 0);
  let rand = randomFn() * totalWeight;
  for (const { rating, weight } of RATING_WEIGHTS) {
    rand -= weight;
    if (rand <= 0) return rating;
  }
  return 4;
}

/**
 * Get rating tier for template selection
 */
export function getRatingTier(rating) {
  if (rating >= 4) return 'positive';
  if (rating === 3) return 'neutral';
  return 'negative';
}

/**
 * Generate a review date spread over the last 90 days
 */
export function generateReviewDate(randomFn) {
  const now = Date.now();
  const daysAgo = Math.floor(randomFn() * 90) + 1;
  const hours = Math.floor(randomFn() * 14) + 8; // 8:00-22:00
  const minutes = Math.floor(randomFn() * 60);
  const date = new Date(now - daysAgo * 24 * 60 * 60 * 1000);
  date.setHours(hours, minutes, 0, 0);
  return date;
}

/**
 * Generate partner response date (1-7 days after review)
 */
export function generateResponseDate(reviewDate, randomFn) {
  const daysLater = Math.floor(randomFn() * 7) + 1;
  const hours = Math.floor(randomFn() * 10) + 9; // 9:00-19:00 (business hours)
  const minutes = Math.floor(randomFn() * 60);
  const date = new Date(reviewDate.getTime() + daysLater * 24 * 60 * 60 * 1000);
  date.setHours(hours, minutes, 0, 0);
  return date;
}
